# Codex Agent Rules（NailNote専用）

---

## 🌏 出力ルール
- すべての出力は日本語で行う
- コードコメントも日本語
- 差分禁止、変更ファイルは必ず「パス付き全文」で提示

---

## 🏗 構造保護ルール
- 既存構造を壊さない
- `.xcodeproj` や `project.pbxproj` を直接編集しない
- グループ追加は Xcode で黄色グループ指定前提
- `rm -rf` や `git reset --hard` など破壊的コマンドは使用禁止
- Swift以外を編集する場合はドキュメントのみ
- RootViewのタブ構成は `記録 / 用品 / AI / 設定` の4つ固定（旧シミュタブはAIネイルスコアに差し替え済み）
- SimHomeViewの最上部は広告プレースホルダバナー（AdPlaceholderBanner）を表示する

---

## 🔐 禁止事項
- xcodeproj配下の直接編集
- シェル経由での `apply_patch` 実行
- フォルダ削除や強制上書き操作

---

## 📘 作業前ルール（必須）
- 作業開始前に `PROJECT_STATUS.md` を必ず読み、現状を要約してから着手する
- 要約を出力した後に実装を開始する

---

## 📝 作業後ルール（必須）
- Swiftファイルを変更した場合、必ず `PROJECT_STATUS.md` を更新する
- 更新内容：
  - 変更したファイル一覧
  - 実装内容の概要
  - 影響範囲
  - 実機確認状況
  - 次にやること
- 更新後は「PROJECT_STATUS.mdを更新しました」と明示する

---

## 🔄 セッション継続ルール
- 起動時に「PROJECT_STATUS.mdを読んで続きから」と言われた場合、
  直近セッションを復元し、差分なく作業を継続する
- 状態が不明瞭な場合は推測せず確認質問を行う

---

## 🧠 安全な開発フロー
1. git状態確認
2. 実装
3. ビルド確認（Xcode Run想定）
4. PROJECT_STATUS.md更新
5. 完了報告

---

## ✨ AIネイルスコア運用ルール
- AI評価実行ボタンを押すときは必ず確認ダイアログ（ユーザー許可）を経由させる
- OPENAI_API_KEY が未設定の場合はモックレスポンスを返す仕様。キー設定手順を案内する際は環境変数/Info.plist/スキームの3通りを提示
- SimHomeViewはAIネイルスコア専用ハブ。`EntryAIScoreBridge` を通じてCoreDataへ保存する実装方針を維持する

---
